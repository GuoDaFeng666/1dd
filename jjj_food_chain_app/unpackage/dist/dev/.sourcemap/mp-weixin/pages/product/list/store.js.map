{"version":3,"sources":["uni-app:///main.js","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?b539","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?9884","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?a1d9","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?e3bf","uni-app:///pages/product/list/store.vue","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?7d14","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/list/store.vue?1a57"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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CA,UA5DA,sBA4DA,IA5DA,EA4DA,CACA,gBACA,yBACA,OACA,CACA,kBACA,iBACA,iCACA;AACA;AACA,KAtEA;AAuEA,WAvEA,mBAuEA,KAvEA,EAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA;AACA,sBADA;AAEA,0BAFA;;AAIA;AACA;;AAEA;AACA,oCADA;AAEA,sBAFA;AAGA,mDAHA;AAIA,gBAJA;AAKA,gBALA;AAMA,oBANA;AAOA,yCAPA;AAQA,yCARA;AASA,yDATA;AAUA,oBAVA;AAWA,qCAXA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA;AACA,OAnBA,EAmBA;AACA;AACA,OArBA;AAsBA,KA/HA;AAgIA,cAhIA,sBAgIA,KAhIA,EAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA,EACA;AACA,8BADA;AAEA,oBAFA;AAGA,oBAHA;AAIA,qCAJA,EADA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA;AACA,OAvBA;AAwBA;AACA;AACA,OA1BA;;AA4BA,KApKA;AAqKA,WArKA,qBAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CADA;AAEA,oBAFA;AAGA;AACA;AACA;AACA;AACA;AACA,OARA;AASA,KApLA;AAqLA;AACA,WAtLA,mBAsLA,KAtLA,EAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,4BAFA;AAGA,8BAHA;AAIA,kBAJA;AAKA,oBALA;AAMA,qCANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA;AACA;AACA;AACA,OAzBA;AA0BA;AACA;AACA,OA5BA;AA6BA,KA5NA;AA6NA;AACA,cA9NA,sBA8NA,KA9NA,EA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA,EACA;AACA,8BADA;AAEA,oBAFA;AAGA,8BAHA;AAIA,oBAJA;AAKA,oBALA;AAMA,qCANA,EADA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA;AACA;AACA;AACA,OA3BA;AA4BA;AACA;AACA,OA9BA;;;;AAkCA,KAxQA;AAyQA;AACA,iBA1QA,yBA0QA,EA1QA,EA0QA;AACA;AACA;AACA;AACA;AACA;AACA,KAhRA;AAiRA;AACA,qBAlRA;;AAoRA,SADA,MACA,QADA,MACA;AACA;AACA;AACA,OAHA;;AAKA,eALA;AAMA,YANA,CAKA,SALA;AAOA;AACA;AACA;AACA;AACA,KA/RA;AAgSA,YAhSA,sBAgSA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA;AACA;AACA;AACA;AACA,SANA,EAMA,IANA;AAOA,OATA;AAUA;AACA,KA7SA;AA8SA;AACA,uBA/SA,iCA+SA;AACA;AACA;AACA,OAFA;AAGA;AACA,iCADA;AAEA,2BAFA;AAGA,+CAHA;AAIA,8FAJA;AAKA;AACA,uBADA;AAEA,0BAFA;AAGA,kBAHA;AAIA,4BAJA;AAKA,kBALA;AAMA,uBANA;AAOA,0BAPA;AAQA,mCARA;AASA,gBATA,EALA;;;AAiBA;AACA;AACA,KAtUA;AAuUA;AACA,wBAxUA,gCAwUA,GAxUA,EAwUA,KAxUA,EAwUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlVA;AAmVA;AACA,iBApVA,2BAoVA;AACA;AACA;AACA,KAvVA;AAwVA;AACA,mBAzVA,6BAyVA;AACA;AACA;AACA,mBADA;AAEA,2BAFA;AAGA,eAHA,qBAGA;AACA;AACA,SALA;;AAOA,KAlWA;AAmWA,aAnWA,uBAmWA;AACA;AACA;AACA,yBADA,EACA;AACA,+CADA;AAEA,oBAFA,EADA;;AAKA;AACA;AACA;AACA;AACA,OATA;;AAWA,KAhXA;AAiXA,eAjXA,uBAiXA,IAjXA,EAiXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzXA;AA0XA,SA1XA,mBA0XA;AACA;AACA;AACA,oBADA;;AAGA;AACA,+CADA;AAEA,oBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA,0BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,0CADA,GACA,qBADA,GACA,cADA;AAEA,qCAFA,GAEA,aAHA;;;AAMA,OAzBA;AA0BA,KAzZA,EAhFA,E;;;;;;;;;;;;;ACvJA;AAAA;AAAA;AAAA;AAA8tC,CAAgB,8lCAAG,EAAC,C;;;;;;;;;;;ACAlvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/list/store.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/product/list/store.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./store.vue?vue&type=template&id=ede46cee&\"\nvar renderjs\nimport script from \"./store.vue?vue&type=script&lang=js&\"\nexport * from \"./store.vue?vue&type=script&lang=js&\"\nimport style0 from \"./store.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/list/store.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./store.vue?vue&type=template&id=ede46cee&\"","var components\ntry {\n  components = {\n    popupLayer: function() {\n      return import(\n        /* webpackChunkName: \"components/popup-layer/popup-layer\" */ \"@/components/popup-layer/popup-layer.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = !_vm.loading ? _vm.theme() : null\n  var l0 =\n    !_vm.loading && _vm.goods_list.length\n      ? _vm.__map(_vm.goods_list, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m1 =\n            item.products.length != 0 ? _vm.menuCartNum(item.category_id) : null\n          var m2 =\n            item.products.length != 0 && m1\n              ? _vm.menuCartNum(item.category_id)\n              : null\n          return {\n            $orig: $orig,\n            m1: m1,\n            m2: m2\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./store.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./store.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\" v-if=\"!loading\" :data-theme='theme()'>\r\n\t\t<view class=\"main\" v-if=\"goods_list.length\">\r\n\t\t\t<view class=\"nav\">\r\n\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<view class=\"store-name\">\r\n\t\t\t\t\t\t\t<text class=\"fb\">{{supplier.name}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<scroll-view class=\"menus\" :style=\"'height:' + scrollviewHigh + 'px;'\"\r\n\t\t\t\t\t:scroll-into-view=\"menuScrollIntoView\" :scroll-with-animation=\"true\" :scroll-animation-duration=\"1\"\r\n\t\t\t\t\tscroll-y>\r\n\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t<view class=\"menu\" :id=\"`menu-${item.category_id}`\"\r\n\t\t\t\t\t\t\t:class=\"{'current': item.category_id === currentCateId}\" v-for=\"(item, index) in goods_list\"\r\n\t\t\t\t\t\t\tv-if=\"item.products.length!=0\" :key=\"index\" @tap=\"handleMenuTap(item.category_id)\">\r\n\t\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t\t\t<view class=\"dot\" v-if=\"menuCartNum(item.category_id)\">{{ menuCartNum(item.category_id) }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<!-- goods list begin -->\r\n\t\t\t\t<scroll-view class=\"goods pr\" :style=\"'height:' + scrollviewHigh + 'px;'\" :scroll-with-animation=\"true\"\r\n\t\t\t\t\t:scroll-animation-duration=\"1\" scroll-y :scroll-top=\"cateScrollTop\" @scroll=\"handleGoodsScroll\">\r\n\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t\t\t<!-- category begin -->\r\n\t\t\t\t\t\t\t<view class=\"category\" v-for=\"(item, index) in goods_list\" :key=\"index\"\r\n\t\t\t\t\t\t\t\tv-if=\"item.products.length!=0\" :id=\"`cate-${item.category_id}`\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"items\">\r\n\t\t\t\t\t\t\t\t\t<!-- 商品 begin -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"good\" v-for=\"(good, key) in item.products\" :key=\"good\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"good.product_image\" class=\"image\"></image>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"name\">{{ good.product_name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"tips text-ellipsis\">{{ good.selling_point }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"price_and_action\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"price\">￥{{ good.product_price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"btn-group\" v-if=\"good.spec_types==20\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"primary\" class=\"btn property_btn\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"min\" @tap=\"getProduct(good)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t选规格\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"dot\" v-if=\"good.cart_num!=0\">{{good.cart_num}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"btn-group\" v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button v-if=\"good.cart_num!=0\" plain class=\"btn reduce_btn\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"min\" hover-class=\"none\" @tap=\"reduceFunc(good)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont  icon icon-jian iconsami-select\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"number\" v-if=\"good.cart_num!=0\">{{ good.cart_num }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn add_btn\" size=\"min\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"addCart(good)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont  icon icon-jia iconadd-select\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- 商品 end -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- category end -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<!-- goods list end -->\r\n\t\t\t</view>\r\n\t\t\t<!-- content end -->\r\n\t\t\t<!-- 购物车栏 begin -->\r\n\t\t\t<view class=\"cart-box\" v-if=\"cart_total_num > 0\">\r\n\t\t\t\t<view class=\"mark\">\r\n\t\t\t\t\t<image src=\"/static/images/menu/cart.png\" class=\"cart-img\" @tap=\"openCartPopup\"></image>\r\n\t\t\t\t\t<view class=\"tag\">{{ cart_total_num }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"price\"><text class=\"f-w2\">￥</text>{{ total_price }}</view>\r\n\t\t\t\t<button type=\"primary\" class=\"pay-btn\" @tap=\"toPay\" :disabled=\"disabledPay\">\r\n\t\t\t\t\t去结算\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- 购物车栏 end -->\r\n\t\t</view>\r\n\t\t<prospec :productModel=\"productModel\" :goodDetailModalVisible=\"goodDetailModalVisible\" :orderType=\"orderType\"\r\n\t\t\t:bag_type=\"bag_type\" @closeGoodDetailModal=\"closeGoodDetailModal\" :dinner_type='dinner_type'\r\n\t\t\t:cart_type=\"cart_type\"></prospec>\r\n\t\t<!-- 购物车详情popup -->\r\n\t\t<popup-layer direction=\"top\" :show-pop=\"cartPopupVisible\" class=\"cart-popup\">\r\n\t\t\t<template slot=\"content\">\r\n\t\t\t\t<view class=\"cart-popup\">\r\n\t\t\t\t\t<view class=\"top d-b-c\">\r\n\t\t\t\t\t\t<view>已选商品</view>\r\n\t\t\t\t\t\t<view @tap=\"handleCartClear\">清空购物车</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<scroll-view class=\"cart-list\" scroll-y>\r\n\t\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t\t<view class=\"item\" v-if=\"item.product_num >0\" v-for=\"(item, index) in cart_list\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t\t\t<view class=\"d-s-s\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"cart-image\">\r\n\t\t\t\t\t\t\t\t\t\t<image style=\"\" :src=\"item.image.file_path\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"name\">{{ item.product.product_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"gray9\">{{item.describe}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"fb\">￥{{ item.price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"f24 gray9\" v-if=\"bag_type!=1\">(包装费：￥{{item.bag_price}})</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t\t<button plain size=\"min\" class=\"btn theme-borderbtn\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t@tap=\"cartReduce(item)\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont icon icon-jian iconsami-select\"></view>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<view class=\"number\">{{ item.product_num }}</view>\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn theme-btn\" size=\"min\" hover-class=\"none\" @tap=\"cartAdd(item)\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont icon icon-jia iconadd-select\"></view>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</popup-layer>\r\n\t\t<!-- 购物车详情popup -->\r\n\t</view>\r\n\t<view class=\"loading\" v-else>\r\n\t\t<image src=\"/static/images/loading.gif\"></image>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport utils from '@/common/utils.js';\r\n\timport prospec from './popup/spec.vue';\r\n\timport modal from '@/components/modal/modal'\r\n\timport popupLayer from '@/components/popup-layer/popup-layer'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmodal,\r\n\t\t\tpopupLayer,\r\n\t\t\tprospec\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisLoading: true,\r\n\t\t\t\tgoods: [], //所有商品\r\n\t\t\t\tsupplier: {\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t},\r\n\t\t\t\tads: [],\r\n\t\t\t\tloading: true,\r\n\t\t\t\tcurrentCateId: 6905, //默认分类\r\n\t\t\t\tcateScrollTop: 0,\r\n\t\t\t\tmenuScrollIntoView: '',\r\n\t\t\t\tcart: [], //购物车\r\n\t\t\t\tgoodDetailModalVisible: false, //是否饮品详情模态框\r\n\t\t\t\tgood: {}, //当前饮品\r\n\t\t\t\tcategory: {}, //当前饮品所在分类\r\n\t\t\t\tcartPopupVisible: false,\r\n\t\t\t\tsizeCalcState: false,\r\n\t\t\t\tlistData: [],\r\n\t\t\t\tgoods_list: [],\r\n\t\t\t\tproductModel: {},\r\n\t\t\t\tclock: false,\r\n\t\t\t\tcart_total_num: 0,\r\n\t\t\t\ttotal_price: 0,\r\n\t\t\t\tcart_list: [],\r\n\t\t\t\torderType: 'takein',\r\n\t\t\t\ttakeout_address: {},\r\n\t\t\t\tphoneHeight: 0,\r\n\t\t\t\t/*可滚动视图区域高度*/\r\n\t\t\t\tscrollviewHigh: 0,\r\n\t\t\t\tdelivery_time: ['00:00', '00:00'],\r\n\t\t\t\tstore_time: ['00:00', '00:00'],\r\n\t\t\t\tofficeTime: {\r\n\t\t\t\t\tnow: 0,\r\n\t\t\t\t\tdelivery_start: 0,\r\n\t\t\t\t\tdelivery_end: 0,\r\n\t\t\t\t\tstore_start: 0,\r\n\t\t\t\t\tstore_end: 0\r\n\t\t\t\t},\r\n\t\t\t\taddclock: false,\r\n\t\t\t\tlongitude: 0,\r\n\t\t\t\tlatitude: 0,\r\n\t\t\t\tbag_type: 1,\r\n\t\t\t\tshop_supplier_id: 0,\r\n\t\t\t\t/* 10配送20自提30店内 */\r\n\t\t\t\tdinner_type: 30,\r\n\t\t\t\tcart_type: 1,\r\n\t\t\t\ttable_id: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet scene = utils.getSceneData(e);\r\n\t\t\tself.table_id = e.table_id;\r\n\t\t\tthis.shop_supplier_id = uni.getStorageSync('selectedId') || 0;\r\n\t\t\tthis.table_id = e.table_id ? e.table_id : scene.table_id;\r\n\t\t\tif (e.shop_supplier_id || scene.shop_supplier_id) {\r\n\t\t\t\tthis.shop_supplier_id = e.shop_supplier_id ? e.shop_supplier_id : scene.shop_supplier_id;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tlet self = this;\r\n\t\t\tself.init();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmenuCartNum() {\r\n\t\t\t\treturn (id) => this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\tif (cur.cate_id === id) {\r\n\t\t\t\t\t\treturn acc += cur.number\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc\r\n\t\t\t\t}, 0)\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tscrollInit() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tself.phoneHeight = res.windowHeight;\r\n\t\t\t\t\t\t// 计算组件的高度\r\n\t\t\t\t\t\tlet view = uni.createSelectorQuery().select('.nav');\r\n\t\t\t\t\t\tview.boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet h = self.phoneHeight - data.height;\r\n\t\t\t\t\t\t\tself.scrollviewHigh = h;\r\n\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinit() { //页面初始化\r\n\t\t\t\tthis.category = {};\r\n\t\t\t\tthis.good = {};\r\n\t\t\t\tthis.goodDetailModalVisible = false;\r\n\t\t\t\tthis.clock = false;\r\n\t\t\t\tthis.getCategory();\r\n\t\t\t\tthis.sizeCalcState = false;\r\n\t\t\t},\r\n\t\t\t/* 获取商品类型 */\r\n\t\t\tgetCategory() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself.loading = true;\r\n\t\t\t\tself.isLoading = true;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t})\r\n\t\t\t\tself._get('product.category/index', {\r\n\t\t\t\t\t\ttype: 1,\r\n\t\t\t\t\t\t/* 0外卖，1店内 */\r\n\t\t\t\t\t\tshop_supplier_id: self.shop_supplier_id,\r\n\t\t\t\t\t\tlongitude: 0,\r\n\t\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\t\tdelivery: 40\r\n\t\t\t\t\t}, function(res) {\r\n\t\t\t\t\t\tself.goods_list = res.data.list;\r\n\t\t\t\t\t\tself.supplier = res.data.supplier;\r\n\t\t\t\t\t\tself.shop_supplier_id = res.data.supplier.shop_supplier_id;\r\n\t\t\t\t\t\tself.bag_type = res.data.supplier.bag_type;\r\n\t\t\t\t\t\tself.loading = false\r\n\t\t\t\t\t\tself.isLoading = false;\r\n\t\t\t\t\t\tself.$nextTick(function() {\r\n\t\t\t\t\t\t\tself.scrollInit();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (self.getUserId()) {\r\n\t\t\t\t\t\t\tself.getCart();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.isBusiness();\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t/*获取数据*/\r\n\t\t\tgetProduct(item) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.clock == true) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tself.clock = true;\r\n\t\t\t\tself.good = item;\r\n\t\t\t\tlet product_id = item.product_id;\r\n\t\t\t\tself.detail = item;\r\n\t\t\t\tself.showGoodDetailModal()\r\n\t\t\t},\r\n\t\t\taddCart(goods) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.addclock) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (goods.product_stock <= goods.cart_num) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: \"超过限购数量\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (goods.product_stock <= 0 || goods.product_stock <= goods.cart_num) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '没有更多库存了'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tproduct_id: goods.product_id,\r\n\t\t\t\t\tproduct_num: 1,\r\n\t\t\t\t\tproduct_sku_id: goods.sku[0].product_sku_id,\r\n\t\t\t\t\tattr: '',\r\n\t\t\t\t\tfeed: '',\r\n\t\t\t\t\tdescribe: '',\r\n\t\t\t\t\tprice: goods.sku[0].product_price,\r\n\t\t\t\t\tbag_price: goods.sku[0].bag_price,\r\n\t\t\t\t\tshop_supplier_id: goods.supplier.shop_supplier_id,\r\n\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t\tdinner_type: self.dinner_type\r\n\t\t\t\t}\r\n\t\t\t\tself.addclock = true;\r\n\t\t\t\tself._post('order.cart/add', params, function(res) {\r\n\t\t\t\t\tlet num = 1;\r\n\t\t\t\t\tself.cart_total_num++;\r\n\t\t\t\t\tlet price = self.total_price * 1 + goods.product_price * 1;\r\n\t\t\t\t\tif (self.bag_type != 1) {\r\n\t\t\t\t\t\tprice += goods.sku[0].bag_price * 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.total_price = price.toFixed(2)\r\n\t\t\t\t\tif (goods.cart_num) {\r\n\t\t\t\t\t\tnum = goods.cart_num + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.goods_list.forEach((item, index) => {\r\n\t\t\t\t\t\titem.products.forEach((product, product_index) => {\r\n\t\t\t\t\t\t\tif (product.product_id == goods.product_id) {\r\n\t\t\t\t\t\t\t\tself.$set(product, 'cart_num', product.cart_num + 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t}, function(err) {\r\n\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\treduceFunc(goods) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.addclock) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet product_id = goods.product_id;\r\n\t\t\t\tlet num = goods.cart_num;\r\n\t\t\t\tself.addclock = true;\r\n\t\t\t\tself._post(\r\n\t\t\t\t\t'order.cart/productSub', {\r\n\t\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\t\ttype: 'down',\r\n\t\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t\t\tdinner_type: self.dinner_type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tnum--;\r\n\t\t\t\t\t\tself.cart_total_num--;\r\n\t\t\t\t\t\tlet price = self.total_price * 1 - goods.product_price * 1;\r\n\t\t\t\t\t\tif (self.bag_type != 1) {\r\n\t\t\t\t\t\t\tprice -= goods.sku[0].bag_price * 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.total_price = price.toFixed(2)\r\n\t\t\t\t\t\tself.goods_list.forEach((item, index) => {\r\n\t\t\t\t\t\t\titem.products.forEach((product, product_index) => {\r\n\t\t\t\t\t\t\t\tif (product.product_id == goods.product_id) {\r\n\t\t\t\t\t\t\t\t\tself.$set(product, 'cart_num', product.cart_num - 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tgetCart() {\r\n\t\t\t\tlet id = uni.getStorageSync('user_id');\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself._get('order.cart/lists', {\r\n\t\t\t\t\tshop_supplier_id: self.shop_supplier_id,\r\n\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tself.isLoading = true;\r\n\t\t\t\t\tself.cart_total_num = res.data.cart_total_num;\r\n\t\t\t\t\tself.total_price = res.data.total_price;\r\n\t\t\t\t\tself.cart_list = res.data.productList;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 购物车商品添加 */\r\n\t\t\tcartAdd(goods) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.addclock) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tself.addclock = true;\r\n\t\t\t\tlet num = goods.product_num + 1\r\n\t\t\t\tlet product_id = goods.product_id;\r\n\t\t\t\tlet total_num = 1;\r\n\t\t\t\tself._post('order.cart/sub', {\r\n\t\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\t\ttotal_num: total_num,\r\n\t\t\t\t\t\tcart_id: goods.cart_id,\r\n\t\t\t\t\t\ttype: 'up',\r\n\t\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t\t\tdinner_type: self.dinner_type\r\n\t\t\t\t\t}, function(res) {\r\n\t\t\t\t\t\tself.cart_total_num++;\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t\tlet price = self.total_price * 1 + goods.price * 1;\r\n\t\t\t\t\t\tif (self.bag_type != 1) {\r\n\t\t\t\t\t\t\tprice += goods.bag_price * 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.total_price = price.toFixed(2)\r\n\t\t\t\t\t\tself.goods_list.forEach((item, index) => {\r\n\t\t\t\t\t\t\titem.products.forEach((product, product_index) => {\r\n\t\t\t\t\t\t\t\tif (product.product_id == goods.product_id) {\r\n\t\t\t\t\t\t\t\t\tself.$set(product, 'cart_num', product.cart_num + 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tself.$set(goods, 'product_num', num);\r\n\t\t\t\t\t\tself.$set(goods, 'total_num', goods.total_num + 1);\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 购物车商品减少 */\r\n\t\t\tcartReduce(goods) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.addclock) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tself.addclock = true;\r\n\t\t\t\tlet product_id = goods.product_id;\r\n\t\t\t\tlet num = goods.product_num;\r\n\t\t\t\tself._post(\r\n\t\t\t\t\t'order.cart/sub', {\r\n\t\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\t\ttotal_num: 1,\r\n\t\t\t\t\t\tcart_id: goods.cart_id,\r\n\t\t\t\t\t\ttype: 'down',\r\n\t\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t\t\tdinner_type: self.dinner_type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tnum--;\r\n\t\t\t\t\t\tself.cart_total_num--;\r\n\t\t\t\t\t\tlet price = self.total_price * 1 - goods.price * 1;\r\n\t\t\t\t\t\tif (self.bag_type != 1) {\r\n\t\t\t\t\t\t\tprice -= goods.bag_price * 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.total_price = price.toFixed(2)\r\n\t\t\t\t\t\tself.goods_list.forEach((item, index) => {\r\n\t\t\t\t\t\t\titem.products.forEach((product, product_index) => {\r\n\t\t\t\t\t\t\t\tif (product.product_id == goods.product_id) {\r\n\t\t\t\t\t\t\t\t\tself.$set(product, 'cart_num', product.cart_num - 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tself.$set(goods, 'product_num', num);\r\n\t\t\t\t\t\tself.$set(goods, 'total_num', goods.total_num - 1)\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tself.addclock = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//点击菜单项事件\r\n\t\t\thandleMenuTap(id) {\r\n\t\t\t\tif (!this.sizeCalcState) {\r\n\t\t\t\t\tthis.calcSize()\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentCateId = id;\r\n\t\t\t\tthis.$nextTick(() => this.cateScrollTop = this.goods_list.find(item => item.category_id == id).top);\r\n\t\t\t},\r\n\t\t\t//商品列表滚动事件\r\n\t\t\thandleGoodsScroll({\r\n\t\t\t\tdetail\r\n\t\t\t}) {\r\n\t\t\t\tif (!this.sizeCalcState) {\r\n\t\t\t\t\tthis.calcSize()\r\n\t\t\t\t}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tscrollTop\r\n\t\t\t\t} = detail;\r\n\t\t\t\tlet tabs = this.goods_list.filter(item => item.top <= scrollTop).reverse();\r\n\t\t\t\tif (tabs.length > 0) {\r\n\t\t\t\t\tthis.currentCateId = tabs[0].category_id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalcSize() {\r\n\t\t\t\tlet h = 10;\r\n\t\t\t\tthis.goods_list.forEach(item => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().select(`#cate-${item.category_id}`)\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\titem.top = h;\r\n\t\t\t\t\t\th += data.height;\r\n\t\t\t\t\t\titem.bottom = h;\r\n\t\t\t\t\t}).exec()\r\n\t\t\t\t})\r\n\t\t\t\tthis.sizeCalcState = true\r\n\t\t\t},\r\n\t\t\t//打开商品详情模态框\r\n\t\t\tshowGoodDetailModal() {\r\n\t\t\t\tthis.detail.sku.forEach((item, index) => {\r\n\t\t\t\t\titem.checked = false;\r\n\t\t\t\t})\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tspecData: this.detail.sku,\r\n\t\t\t\t\tdetail: this.detail,\r\n\t\t\t\t\tshop_supplier_id: this.shop_supplier_id,\r\n\t\t\t\t\tproductSpecArr: this.specData != null ? new Array(this.specData.spec_attr.length) : [],\r\n\t\t\t\t\tshow_sku: {\r\n\t\t\t\t\t\tsku_image: '',\r\n\t\t\t\t\t\tseckill_price: 0,\r\n\t\t\t\t\t\tattr: [],\r\n\t\t\t\t\t\tproduct_sku_id: [],\r\n\t\t\t\t\t\tfeed: [],\r\n\t\t\t\t\t\tline_price: 0,\r\n\t\t\t\t\t\tseckill_stock: 0,\r\n\t\t\t\t\t\tseckill_product_sku_id: 0,\r\n\t\t\t\t\t\tsum: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.productModel = obj;\r\n\t\t\t\tthis.goodDetailModalVisible = true;\r\n\t\t\t},\r\n\t\t\t//关闭商品详情模态框\r\n\t\t\tcloseGoodDetailModal(num, price) {\r\n\t\t\t\tthis.goodDetailModalVisible = false\r\n\t\t\t\tthis.clock = false;\r\n\t\t\t\tif (num) {\r\n\t\t\t\t\tthis.$set(this.good, 'cart_num', this.good.cart_num ? this.good.cart_num + num : num);\r\n\t\t\t\t\tthis.cart_total_num = this.cart_total_num + num;\r\n\t\t\t\t\tthis.total_price = this.total_price * 1 + price * 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.category = {}\r\n\t\t\t\tthis.good = {}\r\n\t\t\t},\r\n\t\t\t//打开/关闭购物车列表popup\r\n\t\t\topenCartPopup() {\r\n\t\t\t\tthis.getCart();\r\n\t\t\t\tthis.cartPopupVisible = !this.cartPopupVisible\r\n\t\t\t},\r\n\t\t\t//清空购物车\r\n\t\t\thandleCartClear() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定清空购物车么',\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tself.clearCart()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclearCart() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself._post(\r\n\t\t\t\t\t'order.cart/delete', {\r\n\t\t\t\t\t\tshop_supplier_id: self.shop_supplier_id,\r\n\t\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tself.cartPopupVisible = false;\r\n\t\t\t\t\t\tself.cart_list = [];\r\n\t\t\t\t\t\tself.init();\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\ttime_to_sec(time) {\r\n\t\t\t\tif (time !== null) {\r\n\t\t\t\t\tvar s = \"\";\r\n\t\t\t\t\tvar hour = time.split(\":\")[0];\r\n\t\t\t\t\tvar min = time.split(\":\")[1];\r\n\t\t\t\t\ts = Number(hour * 3600) + Number(min * 60);\r\n\t\t\t\t\treturn s;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoPay() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t})\r\n\t\t\t\tself._get('order.cart/lists', {\r\n\t\t\t\t\tshop_supplier_id: self.shop_supplier_id,\r\n\t\t\t\t\tcart_type: 1,\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tself.cart_total_num = res.data.cart_total_num;\r\n\t\t\t\t\tself.total_price = res.data.total_price;\r\n\t\t\t\t\tself.cart_list = res.data.productList;\r\n\t\t\t\t\tlet arrIds = [];\r\n\t\t\t\t\tself.cart_list.forEach(item => {\r\n\t\t\t\t\t\tarrIds.push(item.cart_id);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (arrIds.length == 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请选择商品',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/order/confirm-order?order_type=cart&cart_ids=' + arrIds.join(',') +\r\n\t\t\t\t\t\t\t'&delivery=40&shop_supplier_id=' + self.shop_supplier_id + '&cart_type=1' +\r\n\t\t\t\t\t\t\t'&dinner_type=30&table_id=' + self.table_id\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import './menu.scss';\r\n</style>\r\n","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./store.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./store.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1648881346482\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}