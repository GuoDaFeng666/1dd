<view data-theme="{{$root.m0}}"><view class="top-tabbar"><view class="ww100" style="{{('height:'+$root.m1+'px;')}}"></view><view class="tc  head_top" style="{{($root.m2==0?'':'height:'+$root.m3+'px;')}}"><view class="d-c-c bg-white"><view data-event-opts="{{[['tap',[['ordertypeFunc',[0]]]]]}}" class="{{['left',order_type==0?'tab-item-top active':'tab-item-top']}}" bindtap="__e">配送订单</view><view data-event-opts="{{[['tap',[['ordertypeFunc',[1]]]]]}}" class="{{['right',order_type==1?'tab-item-top active':'tab-item-top']}}" bindtap="__e">店内订单</view></view></view><block wx:if="{{order_type==0}}"><view class="d-a-c ww100 mt24"><view data-event-opts="{{[['tap',[['orderStateFunc',[10]]]]]}}" class="{{[delivery_type==10?'tab-item active':'tab-item']}}" bindtap="__e">外卖订单</view><view data-event-opts="{{[['tap',[['orderStateFunc',[20]]]]]}}" class="{{[delivery_type==20?'tab-item active':'tab-item']}}" bindtap="__e">自提订单</view></view></block><block wx:if="{{order_type==1}}"><view class="d-a-c ww100 mt24"><view data-event-opts="{{[['tap',[['orderStateFunc',[40]]]]]}}" class="{{[delivery_type==40?'tab-item active':'tab-item']}}" bindtap="__e">堂食订单</view><view data-event-opts="{{[['tap',[['orderStateFunc',[30]]]]]}}" class="{{[delivery_type==30?'tab-item active':'tab-item']}}" bindtap="__e">打包订单</view></view></block></view><scroll-view class="scroll-Y" style="{{('height:'+scrollviewHigh+'px;')}}" scroll-y="true" lower-threshold="50" data-event-opts="{{[['scrolltolower',[['scrolltolowerFunc',['$event']]]]]}}" bindscrolltolower="__e"><view class="{{[topRefresh?'top-refresh open':'top-refresh']}}"><block wx:for="{{3}}" wx:for-item="circle" wx:for-index="n" wx:key="n"><view class="circle"></view></block></view><view class="order-list"><block wx:for="{{listData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['gotoOrder',['$0'],[[['listData','',index,'order_id']]]]]]]}}" class="item d-b-s" bindtap="__e"><view class="mr10"><image class="sup_img" src="{{item.supplier.logo||'/static/default.png'}}" mode></image></view><view class="flex-1"><view class="d-b-c pb14"><view class="item-dianpu"><view class="item-d-l mr10"><block wx:if="{{item.supplier}}"><text class="gray3 f28 fb text-ellipsis" style="width:245rpx;">{{item.supplier.name}}</text></block></view></view><view class="state"><text class="dominant f26">{{item.state_text}}</text></view></view><view class="order-head d-b-c"><view><text class="shop-name flex-1">{{"下单时间："+item.create_time}}</text></view></view><view class="product-list pr"><view class="o-a"><scroll-view scroll-x="true"><view class="list d-s-c pr100"><block wx:for="{{item.product}}" wx:for-item="img" wx:for-index="num" wx:key="num"><view class="cover mr20"><image src="{{img.image.file_path}}" mode="aspectFit"></image><view class="mt10 tc f24 text-ellipsis">{{img.product_name}}</view></view></block></view></scroll-view></view><view class="total-count"><view class="price">{{'¥'+item.pay_price}}</view><view class="count">{{"共"+item.product.length+"件"}}</view></view></view><view class="order-bts"><block wx:if="{{item.order_status.value!=20}}"><block><block wx:if="{{item.pay_status.value==10}}"><button class="default" type="default" data-event-opts="{{[['tap',[['cancelOrder',['$0'],[[['listData','',index,'order_id']]]]]]]}}" catchtap="__e">取消订单</button></block><block wx:if="{{item.pay_status.value==10}}"><block><button data-event-opts="{{[['tap',[['onPayOrder',['$0'],[[['listData','',index,'order_id']]]]]]]}}" class="theme-borderbtn fb" catchtap="__e">立即支付</button></block></block></block></block></view></view></view></block><block wx:if="{{listData.length==0&&!loading}}"><view class="d-c-c d-c p30"><image style="width:268rpx;height:263rpx;margin-top:123rpx;" src="/static/no-order.png" mode></image><view class="f26 gray9">暂无记录</view><view><button data-event-opts="{{[['tap',[['gotoPage',['/pages/index/index']]]]]}}" class="btn-normal" bindtap="__e">立即点单</button></view></view></block><block wx:else><uni-load-more vue-id="16dfa8ce-1" loadingType="{{loadingType}}" bind:__l="__l"></uni-load-more></block></view></scroll-view><popup vue-id="16dfa8ce-2" show="{{isPayPopup}}" msg="支付方式" data-event-opts="{{[['^hidePopup',[['hidePopupFunc']]]]}}" bind:hidePopup="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="buy-checkout"><view data-event-opts="{{[['tap',[['payTypeFunc',[20]]]]]}}" class="{{[pay_type==20?'item active border-b-e':'item border-b-e']}}" bindtap="__e"><view class="d-s-c"><view class="icon-box d-c-c mr10"><label class="icon iconfont icon-weixin _span"></label></view><text class="key">微信支付</text></view><view class="icon-box d-c-c"></view></view><block wx:if="{{showAlipay}}"><view data-event-opts="{{[['tap',[['payTypeFunc',[30]]]]]}}" class="{{[pay_type==30?'item active border-b-e':'item border-b-e']}}" bindtap="__e"><view class="d-s-c"><view class="icon-box d-c-c mr10"><label class="icon iconfont icon-zhifubao _span"></label></view><text class="key">支付宝支付</text></view><view class="icon-box d-c-c"></view></view></block><view data-event-opts="{{[['tap',[['payTypeFunc',[10]]]]]}}" class="{{[pay_type==10?'item active':'item']}}" bindtap="__e"><view class="d-s-c"><view class="icon-box d-c-c mr10"><label class="icon iconfont icon-yue _span"></label></view><text class="key">余额支付</text></view><view class="icon-box d-c-c"></view></view></view><view class="bts"></view></popup><popup vue-id="16dfa8ce-3" show="{{isCodeImg}}" type="middle" data-event-opts="{{[['^hidePopup',[['hideCodePopupFunc']]]]}}" bind:hidePopup="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="ww100 p20 box-s-b"><image class="ww100" src="{{codeImg}}" mode="widthFix"></image></view></popup></view>