<block wx:if="{{!loading}}"><view class="container" data-theme="{{$root.m0}}"><block wx:if="{{goods_list.length}}"><view class="main"><view class="nav"><view class="header"><view data-event-opts="{{[['tap',[['selectShop',['/pages/shop/shop_storelist']]]]]}}" class="left" bindtap="__e"><view class="store-name"><text class="fb">{{supplier.name}}</text><view class="iconfont icon icon-jiantou"></view></view><view class="gray9 f22">{{"距离："+supplier.distance}}</view></view><view class="right"><block wx:for="{{delivery_set}}" wx:for-item="item" wx:for-index="index" wx:key="*this"><block wx:if="{{item=='10'}}"><view data-event-opts="{{[['tap',[['takout',['$event']]]]]}}" class="{{['takeout',orderType=='takeout'?'active':'']}}" bindtap="__e"><text>配送</text></view></block></block><block wx:for="{{delivery_set}}" wx:for-item="item" wx:for-index="index" wx:key="*this"><block wx:if="{{item=='20'}}"><view data-event-opts="{{[['tap',[['takein',['$event']]]]]}}" class="{{['dinein',orderType=='takein'?'active':'']}}" bindtap="__e"><text>自取</text></view></block></block></view></view></view><view class="content"><scroll-view class="menus" style="{{('height:'+scrollviewHigh+'px;')}}" scroll-into-view="{{menuScrollIntoView}}" scroll-with-animation="{{true}}" scroll-animation-duration="{{1}}" scroll-y="{{true}}"><view class="wrapper"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{item.$orig.products.length!=0}}"><view class="{{['menu',(item.$orig.category_id===currentCateId)?'current':'']}}" id="{{'menu-'+item.$orig.category_id}}" data-event-opts="{{[['tap',[['handleMenuTap',['$0'],[[['goods_list','',index,'category_id']]]]]]]}}" bindtap="__e"><text>{{item.$orig.name}}</text><block wx:if="{{item.m1}}"><view class="dot">{{item.m2+''}}</view></block></view></block></block></view></scroll-view><scroll-view class="goods pr" style="{{('height:'+scrollviewHigh+'px;')}}" scroll-with-animation="{{true}}" scroll-animation-duration="{{1}}" scroll-y="{{true}}" scroll-top="{{cateScrollTop}}" data-event-opts="{{[['scroll',[['handleGoodsScroll',['$event']]]]]}}" bindscroll="__e"><view class="wrapper"><view class="list"><block wx:for="{{goods_list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{item.products.length!=0}}"><view class="category" id="{{'cate-'+item.category_id}}"><view class="title"><text>{{item.name}}</text></view><view class="items"><block wx:for="{{item.products}}" wx:for-item="good" wx:for-index="key" wx:key="key"><view class="good"><image class="image" src="{{good.product_image}}"></image><view class="right"><view><view class="name">{{good.product_name}}</view><view class="tips text-ellipsis">{{good.selling_point}}</view></view><view class="price_and_action"><text class="price">{{"￥"+good.product_price}}</text><block wx:if="{{good.spec_type!=10}}"><view class="btn-group"><button class="btn property_btn" type="primary" hover-class="none" size="min" data-event-opts="{{[['tap',[['getProduct',['$0'],[[['goods_list','',index],['products','',key]]]]]]]}}" bindtap="__e">选规格</button><block wx:if="{{good.cart_num!=0}}"><view class="dot">{{good.cart_num}}</view></block></view></block><block wx:else><view class="btn-group"><block wx:if="{{good.cart_num!=0}}"><button class="btn reduce_btn" type="default" plain="{{true}}" size="min" hover-class="none" data-event-opts="{{[['tap',[['reduceFunc',['$0'],[[['goods_list','',index],['products','',key]]]]]]]}}" bindtap="__e"><view class="icon icon-jian iconfont iconsami-select"></view></button></block><block wx:if="{{good.cart_num!=0}}"><view class="number">{{good.cart_num+''}}</view></block><button class="btn add_btn" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['addCart',['$0'],[[['goods_list','',index],['products','',key]]]]]]]}}" bindtap="__e"><view class="icon icon-jia iconfont iconadd-select"></view></button></view></block></view></view></view></block></view></view></block></block></view></view></scroll-view></view><block wx:if="{{cart_total_num>0}}"><view class="cart-box"><view class="mark"><image class="cart-img" src="/static/images/menu/cart.png" data-event-opts="{{[['tap',[['openCartPopup',['$event']]]]]}}" bindtap="__e"></image><view class="tag">{{cart_total_num}}</view></view><view class="price"><text class="f22">￥</text>{{total_price}}</view><block wx:if="{{total_price*1>=min_money*1||orderType!='takeout'}}"><button class="pay-btn" type="primary" data-event-opts="{{[['tap',[['toPay',['$event']]]]]}}" bindtap="__e">去结算</button></block><block wx:if="{{total_price*1<min_money*1&&total_price==0&&orderType=='takeout'}}"><button class="btn-gray mr10" type="default" disabled="{{true}}">{{''+('￥'+min_money+'起送')+''}}</button></block><block wx:if="{{total_price*1<min_money*1&&total_price!=0&&orderType=='takeout'}}"><button class="btn-gray mr10" type="default" disabled="{{true}}">{{''+('还差￥'+min_money_diff+'起送')+''}}</button></block></view></block></view></block><prospec vue-id="2250f5ae-1" productModel="{{productModel}}" goodDetailModalVisible="{{goodDetailModalVisible}}" orderType="{{orderType}}" bag_type="{{bag_type}}" dinner_type="{{dinner_type}}" cart_type="{{cart_type}}" data-event-opts="{{[['^closeGoodDetailModal',[['closeGoodDetailModal']]]]}}" bind:closeGoodDetailModal="__e" bind:__l="__l"></prospec><popup-layer class="cart-popup" vue-id="2250f5ae-2" direction="top" show-pop="{{cartPopupVisible}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content"><view class="cart-popup"><view class="top d-b-c"><view>已选商品</view><view data-event-opts="{{[['tap',[['handleCartClear',['$event']]]]]}}" bindtap="__e">清空购物车</view></view><scroll-view class="cart-list" scroll-y="{{true}}"><view class="wrapper"><block wx:for="{{cart_list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{item.product_num>0}}"><view class="item"><view class="d-s-s"><view class="cart-image"><image src="{{item.image.file_path}}" mode></image></view><view class="left"><view><view class="name">{{item.product.product_name}}</view><view class="gray9">{{item.describe}}</view></view><view class="center"><text class="fb">{{"￥"+item.price}}</text><block wx:if="{{bag_type!=1}}"><text class="f24 gray9">{{"(包装费：￥"+item.bag_price+")"}}</text></block></view></view></view><view class="right"><button class="btn theme-borderbtn" plain="{{true}}" size="min" hover-class="none" data-event-opts="{{[['tap',[['cartReduce',['$0'],[[['cart_list','',index]]]]]]]}}" bindtap="__e"><view class="iconfont icon icon-jian iconsami-select"></view></button><view class="number">{{item.product_num}}</view><button class="btn theme-btn" size="min" hover-class="none" data-event-opts="{{[['tap',[['cartAdd',['$0'],[[['cart_list','',index]]]]]]]}}" bindtap="__e"><view class="iconfont icon icon-jia iconadd-select"></view></button></view></view></block></block></view></scroll-view></view></view></popup-layer></view></block><block wx:else><view class="loading"><image src="/static/images/loading.gif"></image></view></block>