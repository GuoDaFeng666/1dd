{"version":3,"sources":["webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?cf22","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?3d90","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?9338","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?33a1","uni-app:///pages/product/detail/popup/spec.vue","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?48fc","webpack:///E:/code/jjj-code/jjjfood/jjj_food_chain_app/pages/product/detail/popup/spec.vue?537c"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AAC+K;AAC/K,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgEjrB;AACA,MADA,kBACA;AACA;AACA;AACA,oBAFA;AAGA;AACA;AACA,kBADA;;;AAIA;AACA,uBADA,EAJA,EAJA;;;AAYA;AACA,cAbA;AAcA;AACA,oBAfA;AAgBA;AACA,uBAjBA;AAkBA,cAlBA;;;AAqBA,GAvBA;AAwBA,oCAxBA;AAyBA,QAzBA,oBAyBA;;AAEA,GA3BA;AA4BA,SA5BA,qBA4BA;;AAEA,GA9BA;AA+BA;;AAEA;AACA;AACA;AACA,KALA;;AAOA;AACA;AACA;AACA,KAVA,EA/BA;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA;AACA;AACA,KAfA;AAgBA;AACA,aADA,mBACA,CADA,EACA,CADA,EACA;AACA;AACA,mBADA;AAEA;AACA;AACA,WADA;AAEA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA,eAJA;AAKA,aAZA,EACA;AAYA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OA1BA;AA2BA,gBA3BA;AA4BA,qBA5BA,EAhBA,EA3CA;;;AA0FA;;AAEA;AACA,eAHA,yBAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAZA;;AAcA;AACA,cAfA,sBAeA,UAfA,EAeA,UAfA,EAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAvCA;;;AA0CA;AACA,qBA3CA,+BA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,CADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,KApEA;;AAsEA;AACA,cAvEA,wBAuEA;AACA;AACA,KAzEA;;AA2EA;AACA,eA5EA,yBA4EA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA/FA;;AAiGA;AACA,WAlGA,qBAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;;AAEA;AACA,8BADA;AAEA,4BAFA;AAGA,sCAHA;AAIA;AACA;AACA,wBADA;AAEA,wBAFA;;AAIA;AACA,OAVA;AAWA,KA3HA;;AA6HA;AACA,gBA9HA,0BA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA,GACA,cADA,GACA,iBADA,GACA,OAFA;;AAIA,KA1IA;;AA4IA;AACA,OA7IA,iBA6IA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA,4BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA,KAlKA;;AAoKA;AACA,OArKA,iBAqKA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA,KAlLA,EA1FA,E;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAwvC,CAAgB,6lCAAG,EAAC,C;;;;;;;;;;;ACA5wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/detail/popup/spec.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./spec.vue?vue&type=template&id=0fd54a73&\"\nvar renderjs\nimport script from \"./spec.vue?vue&type=script&lang=js&\"\nexport * from \"./spec.vue?vue&type=script&lang=js&\"\nimport style0 from \"./spec.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/detail/popup/spec.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=template&id=0fd54a73&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :class=\"Visible?'product-popup open':'product-popup close'\" @touchmove.stop.prevent=\"\" @click=\"closePopup\">\r\n\t\t<view class=\"popup-bg\"></view>\r\n\t\t<view class=\"main\" v-on:click.stop>\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<image :src=\"form.show_sku.sku_image\" mode=\"aspectFit\" class=\"avt\"></image>\r\n\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t¥\r\n\t\t\t\t\t<text class=\"num\">{{form.show_sku.product_price}}</text>\r\n\t\t\t\t\t<text class=\"old-price\" v-if=\"form.show_sku.line_price!=null\">¥{{form.show_sku.line_price}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stock\">\r\n\t\t\t\t\t库存：{{form.show_sku.stock_num}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"select_spec\">{{ selectSpec }}</view>\r\n\t\t\t\t<view class=\"close-btn\" @click=\"closePopup\">\r\n\t\t\t\t\t<text class=\"icon iconfont icon-guanbi\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"body\">\r\n\t\t\t\t<!--规格-->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"specs mt20\" style=\"max-height: 600rpx;\" v-if=\"form.specData !=null\">\r\n\t\t\t\t\t\t<view class=\"specs mt20\" v-for=\"(item_attr,attr_index) in form.specData.spec_attr\" :key=\"attr_index\">\r\n\t\t\t\t\t\t\t<view class=\"specs-hd p-20-0\">\r\n\t\t\t\t\t\t\t\t<text class=\"f26 gray3\">{{item_attr.group_name}}</text>\r\n\t\t\t\t\t\t\t\t<!-- \t\t\t\t\t\t\t<text class=\"ml10 red\" v-if=\"form.productSpecArr[attr_index]==null\">\r\n\t\t\t\t\t\t\t\t请选择{{item_attr.group_name}}\r\n\t\t\t\t\t\t\t</text> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"specs-list\">\r\n\t\t\t\t\t\t\t\t<button :class=\"item.checked ? 'btn-checked' : 'btn-checke'\" v-for=\"(item,item_index) in item_attr.spec_items\"\r\n\t\t\t\t\t\t\t\t :key=\"item_index\" @click=\"selectAttr(attr_index, item_index)\">{{item.spec_value}}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!--选择数量-->\r\n\t\t\t\t<view class=\"level-box count_choose\">\r\n\t\t\t\t\t<text class=\"key\">数量</text>\r\n\t\t\t\t\t<view class=\"d-s-c\">\r\n\t\t\t\t\t\t<view class=\"icon-box minus d-c-c\" @click=\"sub()\" :class=\"{'num-wrap':!issub}\">\r\n\t\t\t\t\t\t\t<text class=\"icon iconfont icon-jian\" style=\"font-size: 20rpx;color: #333333;\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"text-wrap\">\r\n\t\t\t\t\t\t\t<input type=\"text\" v-model=\"form.show_sku.sum\" value=\"\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"icon-box plus d-c-c\" :class=\"{'num-wrap':!isadd}\" @click=\"add()\">\r\n\t\t\t\t\t\t\t<text class=\"icon iconfont icon-jia\" style=\"font-size: 20rpx;color: #333333;\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btns\">\r\n\t\t\t\t<button class=\"confirm-btn\" @click=\"confirmFunc(form)\">确认</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t/*是否可见*/\r\n\t\t\t\tVisible: false,\r\n\t\t\t\t/*表单对象*/\r\n\t\t\t\tform: {\r\n\t\t\t\t\tdetail: {\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshow_sku: {\r\n\t\t\t\t\t\tsku_image: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t/*当前商品总库存*/\r\n\t\t\t\tstock: 0,\r\n\t\t\t\t/*选择提示*/\r\n\t\t\t\tselectSpec: '',\r\n\t\t\t\t/*是否打开过多规格选择框*/\r\n\t\t\t\tisOpenSpec: false,\r\n\t\t\t\ttype: ''\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tprops: ['isPopup', 'productModel'],\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\r\n\t\t\t/*判断增加数量*/\r\n\t\t\tisadd: function() {\r\n\t\t\t\treturn this.form.show_sku.sum >= this.stock || this.form.show_sku.sum >= this.form.detail.limit_num;\r\n\t\t\t},\r\n\r\n\t\t\t/*判断减少数量*/\r\n\t\t\tissub: function() {\r\n\t\t\t\treturn this.form.show_sku.sum <= 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t'isPopup': function(n, o) {\r\n\t\t\t\tif (n != o) {\r\n\t\t\t\t\tthis.Visible = n;\r\n\t\t\t\t\tif (!this.isOpenSpec) {\r\n\t\t\t\t\t\tthis.form = this.productModel;\r\n\t\t\t\t\t\tthis.isOpenSpec = true;\r\n\t\t\t\t\t\tthis.initShowSku();\r\n\t\t\t\t\t\tthis.form.specData.spec_attr.forEach((item,index)=>{\r\n\t\t\t\t\t\t\tthis.selectAttr(index,0);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.form.type = this.productModel.type;\r\n\t\t\t\t\tconsole.log(this.productModel)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'form.specData': {\r\n\t\t\t\thandler(n, o) {\r\n\t\t\t\t\tlet str = '',\r\n\t\t\t\t\t\tselect = '';\r\n\t\t\t\t\tthis.isAll = true;\r\n\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\tfor (let i = 0; i < n.spec_attr.length; i++) {\r\n\t\t\t\t\t\t\tconsole.log(this.form.productSpecArr[i])\r\n\t\t\t\t\t\t\tif (this.form.productSpecArr[i] == null) {\r\n\t\t\t\t\t\t\t\tthis.isAll = false;\r\n\t\t\t\t\t\t\t\tstr += n.spec_attr[i].group_name + ' ';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tn.spec_attr[i].spec_items.forEach(item => {\r\n\t\t\t\t\t\t\t\t\tif (this.form.productSpecArr[i] == item.item_id) {\r\n\t\t\t\t\t\t\t\t\t\tselect += '\\\"' + item.spec_value + '\\\" ';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!this.isAll) {\r\n\t\t\t\t\t\t\tstr = '请选择: ' + str;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tselect = '已选: ' + select;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.selectSpec = this.isAll ? select : str;\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true,\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\t/*初始化*/\r\n\t\t\tinitShowSku() {\r\n\t\t\t\tthis.form.show_sku.sku_image = this.form.detail.image[0].file_path;\r\n\t\t\t\tthis.form.show_sku.product_price = this.form.detail.product_price;\r\n\t\t\t\tthis.form.show_sku.product_sku_id = 0;\r\n\t\t\t\tthis.form.show_sku.line_price = this.form.detail.line_price;\r\n\t\t\t\tthis.form.show_sku.stock_num = this.form.detail.product_stock;\r\n\t\t\t\tthis.form.show_sku.sum = 1;\r\n\t\t\t\tthis.stock = this.form.detail.product_stock;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/*选择属性*/\r\n\t\t\tselectAttr(attr_index, item_index) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet items = self.form.specData.spec_attr[attr_index].spec_items;\r\n\t\t\t\tlet curItem = items[item_index];\r\n\t\t\t\tif (curItem.checked) {\r\n\t\t\t\t\tcurItem.checked = false;\r\n\t\t\t\t\tself.form.productSpecArr[attr_index] = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\t\t\titems[i].checked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurItem.checked = true;\r\n\t\t\t\t\tself.form.productSpecArr[attr_index] = curItem.item_id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let i = 0; i < self.form.productSpecArr.length; i++) {\r\n\t\t\t\t\tif (self.form.productSpecArr[i] == null) {\r\n\t\t\t\t\t\tself.initShowSku();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 更新商品规格信息\r\n\t\t\t\tself.updateSpecProduct();\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/*更新商品规格信息*/\r\n\t\t\tupdateSpecProduct() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet specSkuId = self.form.productSpecArr.join('_');\r\n\t\t\t\t// 查找skuItem\r\n\t\t\t\tlet spec_list = self.form.specData.spec_list,\r\n\t\t\t\t\tskuItem = spec_list.find((val) => {\r\n\t\t\t\t\t\treturn val.spec_sku_id == specSkuId;\r\n\t\t\t\t\t});\r\n\t\t\t\t// 记录product_sku_id\r\n\t\t\t\t// 更新商品价格、划线价、库存\r\n\t\t\t\tif (typeof skuItem === 'object') {\r\n\t\t\t\t\tself.stock = skuItem.spec_form.stock_num;\r\n\t\t\t\t\tif (self.form.show_sku.sum > self.stock) {\r\n\t\t\t\t\t\tself.form.show_sku.sum = self.stock > 0 ? self.stock : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.form.show_sku.product_sku_id = specSkuId;\r\n\t\t\t\t\tself.form.show_sku.product_price = skuItem.spec_form.product_price;\r\n\t\t\t\t\tself.form.show_sku.line_price = skuItem.spec_form.line_price;\r\n\t\t\t\t\tself.form.show_sku.stock_num = skuItem.spec_form.stock_num;\r\n\t\t\t\t\tif (skuItem.spec_form.image_id > 0) {\r\n\t\t\t\t\t\tself.form.show_sku.sku_image = skuItem.spec_form.image_path;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.form.show_sku.sku_image = self.form.detail.image[0].file_path;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/*关闭弹窗*/\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.$emit('close', this.form.specData, null);\r\n\t\t\t},\r\n\r\n\t\t\t/*确认提交*/\r\n\t\t\tconfirmFunc() {\r\n\t\t\t\tif (this.form.specData != null) {\r\n\t\t\t\t\tfor (let i = 0; i < this.form.productSpecArr.length; i++) {\r\n\t\t\t\t\t\tif (this.form.productSpecArr[i] == null) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请选择规格',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.form.type == 'card') {\r\n\t\t\t\t\tthis.addCart();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.createdOrder();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/*加入购物车*/\r\n\t\t\taddCart() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet product_id = self.form.detail.product_id;\r\n\t\t\t\tlet total_num = self.form.show_sku.sum;\r\n\t\t\t\tlet product_sku_id = self.form.show_sku.product_sku_id;\r\n\t\t\t\tif (self.form.detail.spec_type == 20 && product_sku_id == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择属性',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself._post('order.cart/add', {\r\n\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\ttotal_num: total_num,\r\n\t\t\t\t\tproduct_sku_id: product_sku_id,\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tself.$emit('close', null, res.data.cart_total_num);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/*创建订单*/\r\n\t\t\tcreatedOrder() {\r\n\t\t\t\tlet product_id = this.form.detail.product_id;\r\n\t\t\t\tlet product_num = this.form.show_sku.sum;\r\n\t\t\t\tlet product_sku_id = this.form.show_sku.product_sku_id;\r\n\t\t\t\tlet room_id = ''\r\n\t\t\t\tif (this.room_id != 0 & this.room_id != '') {\r\n\t\t\t\t\troom_id = '&room_id=' + this.form.room_id;\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/order/confirm-order?product_id=' + product_id + '&product_num=' + product_num +\r\n\t\t\t\t\t\t'&product_sku_id=' + product_sku_id + '&order_type=buy' + room_id\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/*商品增加*/\r\n\t\t\tadd() {\r\n\t\t\t\tif (this.stock <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.show_sku.sum >= this.stock) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '数量超过了库存',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.detail.limit_num > 0 && this.form.show_sku.sum >= this.form.detail.limit_num) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '数量超过了限购数量',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.form.show_sku.sum++;\r\n\t\t\t},\r\n\r\n\t\t\t/*商品减少*/\r\n\t\t\tsub() {\r\n\t\t\t\tif (this.stock <= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.show_sku.sum < 2) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '商品数量至少为1',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.form.show_sku.sum--;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.product-popup {}\r\n\r\n\t.product-popup .popup-bg {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tbackground: rgba(0, 0, 0, .6);\r\n\t\tz-index: 99;\r\n\t}\r\n\r\n\t.product-popup .main {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tbottom: 0;\r\n\t\tmin-height: 200rpx;\r\n\t\t// max-height: 1050rpx;\r\n\t\tbackground-color: #fff;\r\n\t\ttransform: translate3d(0, 980rpx, 0);\r\n\t\ttransition: transform .2s cubic-bezier(0, 0, .25, 1);\r\n\t\t// bottom: env(safe-area-inset-bottom);\r\n\t\tz-index: 99;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.product-popup.open .main {\r\n\t\ttransform: translate3d(0, 0, 0);\r\n\t\tz-index: 99;\r\n\t}\r\n\r\n\t.product-popup.close .popup-bg {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.product-popup.close .main {\r\n\t\tdisplay: none;\r\n\t\tz-index: -1;\r\n\t}\r\n\r\n\t.product-popup .header {\r\n\t\theight: 200rpx;\r\n\t\tpadding: 40rpx 0 10rpx 250rpx;\r\n\t\tposition: relative;\r\n\t\tborder-bottom: 1px solid #EEEEEE;\r\n\t}\r\n\r\n\t.product-popup .header .avt {\r\n\t\tposition: absolute;\r\n\t\ttop: 40rpx;\r\n\t\tleft: 30rpx;\r\n\t\twidth: 180rpx;\r\n\t\theight: 180rpx;\r\n\t\tborder: 2px solid #FFFFFF;\r\n\t\tbackground: #FFFFFF;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.product-popup .header .stock {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.product-popup .close-btn {\r\n\t\tposition: absolute;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\ttop: 40rpx;\r\n\t\tright: 30rpx;\r\n\t}\r\n\r\n\t.product-popup .price {\r\n\t\tcolor: $dominant-color;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.product-popup .price .num {\r\n\t\tpadding: 0 4rpx;\r\n\t\tfont-size: 40rpx;\r\n\t}\r\n\r\n\t.product-popup .old-price {\r\n\t\tmargin-left: 10rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999999;\r\n\t\ttext-decoration: line-through;\r\n\t}\r\n\r\n\t.product-popup .body {\r\n\t\tpadding: 20rpx 30rpx 39rpx 30rpx;\r\n\t\t// max-height: 600rpx;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.product-popup .level-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.product-popup .level-box .key {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.product-popup .level-box .icon-box {\r\n\t\twidth: 48rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground: #e0e0e0;\r\n\t}\r\n\r\n\t.product-popup .num-wrap .iconfont {\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.product-popup .num-wrap.no-stock .iconfont {\r\n\t\tcolor: #CCCCCC;\r\n\t}\r\n\r\n\t.product-popup .level-box .text-wrap {\r\n\t\tmargin: 0 4rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder: none;\r\n\t\tbackground: #ffffff;\r\n\t}\r\n\r\n\t.product-popup .level-box .text-wrap input {\r\n\t\tpadding: 0 10rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\twidth: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.specs .specs-list {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.specs .specs-list button {\r\n\t\tmargin-right: 10rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.specs .specs-list button:after,\r\n\t.product-popup .btns button,\r\n\t.product-popup .btns button:after {\r\n\t\theight: 88rpx;\r\n\t\tline-height: 88rpx;\r\n\t\tborder: 0;\r\n\t\tborder-radius: 0;\r\n\t\tmargin-bottom: 55rpx;\r\n\t}\r\n\r\n\t.product-popup .btns .confirm-btn {\r\n\t\twidth: 710rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground: linear-gradient(90deg, #FF6B6B 4%, #F6220C 100%);\r\n\t\tborder-radius: 40rpx;\r\n\t\tmargin: 0 auto;\r\n\t\tmargin-bottom: 55rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\r\n\t.btn-checked {\r\n\t\tborder: 1px solid #F6220C;\r\n\t\tborder-radius: 6px;\r\n\t\tcolor: #F6220C;\r\n\t\tfont-size: 26rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t.btn-checke {\r\n\t\tborder: 1rpx solid #D9D9D9;\r\n\t\tborder-radius: 6rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #333333;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646788480685\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}